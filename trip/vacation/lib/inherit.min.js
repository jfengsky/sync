define(function(a,b,c){function n(a,b,c){var f=!1;if(j){for(var h=[],i=0,k=m.length;k>i;i++)c.hasOwnProperty(this)&&(f=!0)&&h.push({name:this,val:c[this]});f&&(d(c,function(a){h.push({name:a,val:this})}),c=h)}d(c,function(c,d){if(f&&(c=d.name,d=d.val),e(d)&&(!g||d.toString().indexOf(".__base")>-1)){var h=a[c]||function(){};b[c]=function(){var a=this.__base;this.__base=h;var b=d.apply(this,arguments);return this.__base=a,b}}else b[c]=d})}var d=function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])},e=function(a){return"[object Function]"===Object.prototype.toString.call(a)},f=function(a,b){return d(b,function(b,c){a[b]=c}),a},g=function(){"_"}.toString().indexOf("_")>-1,h=function(){},i=Object.create||function(a){var b=function(){};return b.prototype=a,new b},j=!0,k={toString:""};for(var l in k)k.hasOwnProperty(l)&&(j=!1);var m=j?["toString","valueOf"]:null;b=c.exports=function(){var a=arguments,b=e(a[0]),c=b?a[0]:h,d=a[b?1:0]||{},g=a[b?2:1],j=d.__constructor||b&&c.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:function(){};if(!b)return j.prototype=d,j.prototype.__self=j.prototype.constructor=j,f(j,g);f(j,c);var k=c.prototype,l=j.prototype=i(k);return l.__self=l.constructor=j,n(k,l,d),g&&n(c,j,g),j},b.inheritSelf=function(a,b,c){var d=a.prototype;return n(d,d,b),c&&n(a,a,c),a}});